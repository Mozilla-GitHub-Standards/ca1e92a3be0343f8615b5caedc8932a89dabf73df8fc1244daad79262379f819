{% extends "layout.html" %}

{% import "macros/platforms.html" as platforms %}
{% import "macros/oses.html" as oses %}
{% import "macros/statuses.html" as statuses %}

{% block title %}
    Plugin Detail :: {{plugin.name | e}}
{% endblock %}

{% block content %}

    <ul class="actions">
        <li><a href="#">Copy to Sandbox</a></li>
        <li><a href="#">Edit Details</a></li>
        <li><a href="#">View Original</a></li>
    </ul>

    <div class="meta">
        {% if plugin.icon_url %}
            <div class="icon">
                <img src="{{plugin.icon_url}}" alt="Plugin icon" />
            </div>
        {% endif %}
        {% if plugin.description %}
            <div>
                <h2>Description:</h2>
                <p>{{plugin.description}}</p>
            </div>
        {% endif %}
    </div>

    <ul class="releases">
        {% for version, version_releases in releases %}
            <li class="release">
            <div id="{{version | e}}" class="version">{{version | e}}</div>
                <table class="version_releases">
                    <thead>
                        <tr>
                            <th>Platform</th>
                            <th>OS</th>
                            <th>Status</th>
                            <th>URL</th>
                        </tr>
                    </thead>
                    <tbody>
                        {% for release in version_releases %}
                        <tr id="{{release.plugin.pfs_id}}-{{release.id}}">
                                <td>{{platforms.readable(release.platform)}}</td>
                                <td>{{oses.readable(release.os)}}</td>
                                <td>{{statuses.readable(release.status_code)}}</td>
                                <td><a href="{{release.url}}">Download / Details</a>
                            </tr>
                        {% endfor %}
                    </tbody>
                </table>
            </li>
        {% endfor %}
    </ul>

{% endblock %}
